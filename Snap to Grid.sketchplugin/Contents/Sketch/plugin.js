!function(t,e){for(var n in e)t[n]=e[n]}(this,function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";var i={};n.r(i),n.d(i,"CHECK_BOX",function(){return u}),n.d(i,"DROP_DOWN",function(){return c}),n.d(i,"RADIO_BUTTONS",function(){return s}),n.d(i,"NUMERIC_TEXT_BOX",function(){return a.a}),n.d(i,"STRING_TEXT_BOX",function(){return f}),n.d(i,"TEXT_BOX",function(){});var r=n(1);function o(){const t={gridHeight:500,gridWidth:500,ignoreRegularExpression:"",state:0};return t?Object.keys(t).reduce(function(e,n){const i=Object(r.sessionVariable)(n),o=Object(r.settingForKey)(n),u=void 0!==i?i:o,c=t[n];return e[n]=void 0!==u?u:c,e},{}):{}}function u({width:t,height:e,label:n,value:i}){const r=NSButton.alloc().initWithFrame(NSMakeRect(0,0,t,e));return r.setButtonType(NSSwitchButton),r.setBezelStyle(0),r.setState(i?NSOnState:NSOffState),r.setTitle(n),{view:r,retrieveValue:function(){return"1"==r.stringValue()}}}function c({width:t,height:e,value:n,possibleValues:i}){const r=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,t,e));i.forEach(function(t){r.addItemWithTitle(t)});const o=void 0!==n?i.indexOf(n):0;return r.selectItemAtIndex(o),{view:r,retrieveValue:function(){const t=r.indexOfSelectedItem();return i[t]}}}function s({width:t,height:e,value:n,possibleValues:i}){const r=NSButtonCell.alloc().init();r.setButtonType(NSRadioButton);const o=i.length,u=NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(0,0,t,e),NSRadioModeMatrix,r,1,o);u.setCellSize(CGSizeMake(Math.floor(t/o),e)),u.cells().forEach(function(t,e){t.setTitle(i[e])});const c=void 0!==n?i.indexOf(n):0;return u.selectCellAtRow_column(0,c),{view:u,retrieveValue:function(){const t=u.cells().indexOfObject(u.selectedCell());return i[t]}}}var a=n(4),l=n(2);const f=Object(l.a)(),d=20,g=12,h=20,p=6,y=300;function _({title:t,inputs:e}){const n=o(),{inputs:r,views:u,stackViewHeight:c}=function({inputsConfig:t,settings:e}){const n={},r=[];let o=0;return t.forEach(function({type:t,key:u,label:c,value:s,...a}){if(c&&"CHECK_BOX"!==t){const t=function({label:t,width:e,height:n}){const i=NSTextField.alloc().initWithFrame(NSMakeRect(0,0,e,n));return i.setBezeled(!1),i.setDrawsBackground(!1),i.setEditable(!1),i.setLineBreakMode(NSLineBreakByTruncatingTail),i.setSelectable(!1),i.setStringValue(t),i}({label:c,width:y,height:h});r.push({view:t,paddingBottom:p}),o+=h+p}const l=e[u],f=null!=s?s:l,{view:_,retrieveValue:b}=i[t]({label:c,value:f,width:y,height:d,...a});r.push({view:_,paddingBottom:g}),o+=d+g,n[u]=b}),{inputs:n,views:r,stackViewHeight:o-=g}}({inputsConfig:e,settings:n}),s=function({width:t,height:e,views:n}){const i=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,t,e));return i.setAlignment(NSLayoutAttributeLeft),i.setOrientation(NSUserInterfaceLayoutOrientationVertical),i.setSpacing(0),i.setTranslatesAutoresizingMaskIntoConstraints(!0),i.updateConstraintsForSubtreeIfNeeded(),n.forEach(function({view:t,paddingBottom:e}){i.addView_inGravity_(t,NSStackViewGravityTop),i.setCustomSpacing_afterView_(e,t)}),i}({width:y,height:c,views:u}),a=function(t){const e=NSAlert.alloc().init();return e.window().setAutorecalculatesKeyViewLoop(!0),e.setMessageText(t),e.addButtonWithTitle("OK"),e.addButtonWithTitle("Cancel"),e}(t);return a.setAccessoryView(s),"1000"==a.runModal()?Object.keys(r).reduce(function(t,e){const n=r[e];return t[e]=n(),t},{}):null}var b=n(5),v=n.n(b);function O(t,e){v.a.message(e&&e.symbol?`${e.symbol} ${t}`:t)}function S(){const t={gridHeight:500,gridWidth:500,ignoreRegularExpression:"",state:0};t&&(Object.keys(t).forEach(function(t){Object(r.setSettingForKey)(t,void 0),Object(r.setSessionVariable)(t,void 0)}),O("Reset settings"))}const x=w(r.setSettingForKey),m=w(r.setSessionVariable);function w(t){return function(e,n){if(void 0===e)return;Object.keys(e).forEach(function(n){const i=e[n];void 0!==i&&t(n,i)});const i=void 0!==n&&n.successMessage;i&&O(i)}}n(6),n(7);n(8);var E=n(9);function T(){const t=NSApplication.sharedApplication().orderedDocuments();return Object(E.fromNative)(t[0])}function k(){return T().selectedPage.layers}function N(){return k().filter(function(t){return"Artboard"===t.type})}n.d(e,"d",function(){return o}),n.d(e,"e",function(){return _}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return x}),n.d(e,"h",function(){return m}),n.d(e,"a",function(){return"NUMERIC_TEXT_BOX"}),n.d(e,"b",function(){return"STRING_TEXT_BOX"}),n.d(e,"c",function(){return N})},function(t,e){t.exports=require("sketch/settings")},function(t,e,n){"use strict";function i(t){return function({width:e,height:n,value:i,placeholder:r}){const o=NSTextField.alloc().initWithFrame(NSMakeRect(0,0,e,n)),u=null==i?"":`${i}`;return o.setStringValue(u),r&&o.setPlaceholderString(r),{view:o,retrieveValue:function(){const e=`${o.stringValue()}`;return t?t(e):e}}}}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.r(e);var i=n(0);function r({layers:t,gridWidth:e,gridHeight:n}){const i=[];return function({grid:t,layersToInsert:e,gridWidth:n,gridHeight:i}){e.forEach(function(e){const r=o({value:e.frame.x,multiple:n}),u=o({value:e.frame.y,multiple:i}),c=function({grid:t,y:e}){const n=t.reduce(function(t,n,i){return-1!==t?t:n.y===e?i:t},-1);if(-1!==n)return t[n];const i=t.reduce(function(t,n,i){return e<n.y?i:t},t.length),r={y:e,layers:[]};return t.splice(i,0,r),r}({grid:t,y:u});c.layers.push({x:r,layer:e})}),function(t){t.forEach(function(t){t.layers.sort(function(t,e){return t.layer.frame.x-e.layer.frame.x})})}(t)}({grid:i,layersToInsert:t,gridWidth:e,gridHeight:n}),function({grid:t,gridHeight:e}){t.forEach(function({y:n,layers:i},r){let u=0;i.forEach(function({layer:t}){t.frame.height>u&&(u=t.frame.height)});const c=r+1;c<t.length&&n+u>=t[c].y&&t.slice(c).forEach(function(t){t.y=o({value:t.y+u,multiple:e})})})}({grid:i,gridHeight:n}),function({grid:t,gridWidth:e}){t.forEach(function({layers:t}){t.forEach(function({x:n,layer:i},r){const u=r+1,c=i.frame.width;u<t.length&&n+c>=t[u].x&&t.slice(u).forEach(function(t){t.x=o({value:t.x+c,multiple:e}),t.x===n&&(t.x+=e)})})})}({grid:i,gridWidth:e}),i}function o({value:t,multiple:e}){return Math.floor(t/e)*e}function u(){const{gridHeight:t,gridWidth:e,ignoreRegularExpression:n}=Object(i.d)();!function(t){t.forEach(function({y:t,layers:e}){e.forEach(function({x:e,layer:n}){n.frame.x=e,n.frame.y=t})})}(r({layers:function(t){const e=Object(i.c)();if(!t)return e;const n=new RegExp(t);return e.filter(function(t){return!n.test(t.name)})}(n),gridWidth:e,gridHeight:t}))}n.d(e,"default",function(){return u})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return numericTextBox});var _text_box__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);const numericTextBox=Object(_text_box__WEBPACK_IMPORTED_MODULE_0__.a)(function(value){return parseFloat(eval(value))})},function(t,e){t.exports=require("sketch/ui")},function(t,e){t.exports=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}},function(t,e,n){"use strict";const i=async(t,e)=>{let n=0;for(const i of t)await e(await i,n++);return t};t.exports=i,t.exports.default=i},function(t,e){t.exports=require("sketch/dom")},function(t,e){t.exports=require("sketch")},function(t,e,n){t.exports=n(11)},function(t,e,n){t.exports={"snap-to-grid":n(3).default,"insert-artboard":n(12).default,"settings/settings":n(13).default,"settings/reset-settings":n(14).default}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return o});var i=n(0),r=n(3);function o({action:t}){const{state:e}=Object(i.d)();0!==e?1!==e?2===e&&"ArtboardChanged.finish"==t&&(Object(i.h)({state:0}),Object(r.default)()):"HandlerLostFocus"==t?Object(i.h)({state:2}):Object(i.h)({state:0}):"InsertArtboard.finish"==t&&Object(i.h)({state:1})}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return o});var i=n(0);const r={title:"Settings",inputs:[{type:i.a,key:"gridWidth",label:"Grid width"},{type:i.a,key:"gridHeight",label:"Grid height"},{type:i.b,key:"ignoreRegularExpression",label:"Ignore regular expression"}]};function o(){const t=Object(i.e)(r);t&&Object(i.g)(t,{successMessage:"Settings saved"})}},function(t,e,n){"use strict";n.r(e);var i=n(0);e.default=i.f}]));