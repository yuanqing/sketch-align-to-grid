!function(t,e){for(var r in e)t[r]=e[r]}(this,function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=12)}([function(t,e,r){"use strict";var n={};r.r(n),r.d(n,"CHECK_BOX",function(){return y}),r.d(n,"DROP_DOWN",function(){return p}),r.d(n,"RADIO_BUTTONS",function(){return O}),r.d(n,"NUMERIC_TEXT_BOX",function(){return _.a}),r.d(n,"STRING_TEXT_BOX",function(){return m}),r.d(n,"TEXT_BOX",function(){});var i=r(1);function o({keyPrefix:t=null,shouldRemoveKeyPrefix:e=!0}={}){const r={"alignArtboardsToCanvasGrid.snapToGrid":!1,"alignArtboardsToCanvasGrid.gridHeight":200,"alignArtboardsToCanvasGrid.gridWidth":200,"alignArtboardsToCanvasGrid.whitelistRegularExpression":"^@","alignLayersToArtboardGrid.snapToGrid":!1,"alignLayersToArtboardGrid.gridSize":10,"alignLayersToArtboardGrid.whitelistRegularExpression":"^@"};if(!r)return{};const n={};return Object.keys(r).forEach(function(t){const e=Object(i.sessionVariable)(t),o=Object(i.settingForKey)(t),a=void 0!==e?e:o,s=r[t];n[t]=void 0!==a?a:s}),t?function({settings:t,keyPrefix:e,shouldRemoveKeyPrefix:r}){const n=e.length,i={};return Object.keys(t).forEach(function(o){-1!==o.indexOf(e)&&(i[r?o.substring(n):o]=t[o])}),i}({settings:n,keyPrefix:`${t}.`,shouldRemoveKeyPrefix:e}):n}const a=1,s=10,u=17;const c=2,l=20,d=2;const f=20,g=10;function y({width:t,y:e,label:r,value:n}){const i=NSButton.alloc().initWithFrame(NSMakeRect(0,e,t,f));return i.setButtonType(NSSwitchButton),i.setBezelStyle(0),i.setState(n?NSOnState:NSOffState),i.setTitle(r),{view:i,height:f+g,retrieveValue:function(){return"1"==i.stringValue()}}}const b=20,h=15;function p({width:t,y:e,value:r,possibleValues:n}){const i=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,e,t,b));n.forEach(function(t){i.addItemWithTitle(t)});const o=void 0!==r?n.indexOf(r):0;return i.selectItemAtIndex(o),{view:i,height:b+h,retrieveValue:function(){const t=i.indexOfSelectedItem();return n[t]}}}const v=20,x=10;function O({width:t,y:e,value:r,possibleValues:n}){const i=NSButtonCell.alloc().init();i.setButtonType(NSRadioButton);const o=n.length,a=NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(0,e,t,v),NSRadioModeMatrix,i,1,o);a.setCellSize(CGSizeMake(Math.floor(t/o),v)),a.cells().forEach(function(t,e){t.setTitle(n[e])});const s=void 0!==r?n.indexOf(r):0;return a.selectCellAtRow_column(0,s),{view:a,height:v+x,retrieveValue:function(){const t=a.cells().indexOfObject(a.selectedCell());return n[t]}}}var _=r(8),T=r(4);const m=Object(T.a)(),S=300;function w({title:t,inputs:e}){const r=o(),{formView:i,retrieveValues:f}=function({inputsConfig:t,settings:e}){const r=NSView.alloc().init();r.setFlipped(!0);const i={};let o=0;return t.forEach(function(t){if("-"===t){const{view:t,height:e}=function({width:t,y:e}){const r=NSView.alloc().initWithFrame(NSMakeRect(0,e+s,t,a));return r.setWantsLayer(1),r.layer().setBackgroundColor(CGColorCreateGenericRGB(127/255,127/255,127/255,.5)),{view:r,height:s+a+u}}({width:S,y:o});return o+=e,void r.addSubview(t)}const{type:f,key:g,label:y,value:b,...h}=t;if(y&&"CHECK_BOX"!==f){const{view:t,height:e}=function({width:t,y:e,label:r}){const n=NSTextField.alloc().initWithFrame(NSMakeRect(0,e+c,t,l));return n.setBezeled(!1),n.setDrawsBackground(!1),n.setEditable(!1),n.setLineBreakMode(NSLineBreakByTruncatingTail),n.setSelectable(!1),n.setStringValue(r),{view:n,height:c+l+d}}({width:S,y:o,label:y});o+=e,r.addSubview(t)}const p=e[g],v=null!=b?b:p,{view:x,height:O,retrieveValue:_}=n[f]({width:S,y:o,label:y,value:v,...h});o+=O,r.addSubview(x),i[g]=_}),r.setFrame(NSMakeRect(0,0,S,o)),{formView:r,retrieveValues:i}}({inputsConfig:e,settings:r}),g=function(t){const e=NSAlert.alloc().init();return e.setMessageText(t),e.addButtonWithTitle("OK"),e.addButtonWithTitle("Cancel"),e}(t);return g.setAccessoryView(i),"1000"==g.runModal()?Object.keys(f).reduce(function(t,e){const r=f[e];return t[e]=r(),t},{}):null}var j=r(9),A=r.n(j);function G(t,e){A.a.message(e&&e.symbol?`${e.symbol} ${t}`:t)}function E(t){G(t,{symbol:"âœ”"})}function k(){const t={"alignArtboardsToCanvasGrid.snapToGrid":!1,"alignArtboardsToCanvasGrid.gridHeight":200,"alignArtboardsToCanvasGrid.gridWidth":200,"alignArtboardsToCanvasGrid.whitelistRegularExpression":"^@","alignLayersToArtboardGrid.snapToGrid":!1,"alignLayersToArtboardGrid.gridSize":10,"alignLayersToArtboardGrid.whitelistRegularExpression":"^@"};t&&(Object.keys(t).forEach(function(t){Object(i.setSettingForKey)(t,void 0),Object(i.setSessionVariable)(t,void 0)}),G("Reset settings"))}const C=R(i.setSettingForKey);R(i.setSessionVariable);function R(t){return function(e,r){if(void 0===e)return;Object.keys(e).forEach(function(r){const n=e[r];void 0!==n&&t(r,n)});const n=void 0!==r&&r.successMessage;n&&G(n)}}r(10),r(11);r(5);var N=r(3);function B(){const t=NSApplication.sharedApplication().orderedDocuments();return Object(N.fromNative)(t[0])}function M(t){!function t(e,r){const n=e.parent;n&&"Group"===n.type&&!r[n.id]&&(n.adjustToFit(),r[n.id]=!0,t(n,r))}(t,{})}function W(){return B().selectedPage.layers}function P(){return W().filter(function(t){return"Artboard"===t.type})}function V(){return B().selectedLayers.layers.reverse()}function L(t,e){t.forEach(function(t){e(t);const r=t.type;"Artboard"!==r&&"Group"!==r||L(t.layers,e)})}function F(t){return function t(e,r){const n=e.parent;if("Artboard"===n.type)return r;const i={x:r.x+n.frame.x,y:r.y+n.frame.y};return t(n,i)}(t,{x:t.frame.x,y:t.frame.y})}r.d(e,"i",function(){return o}),r.d(e,"k",function(){return w}),r.d(e,"l",function(){return k}),r.d(e,"m",function(){return C}),r.d(e,"a",function(){return"CHECK_BOX"}),r.d(e,"b",function(){return"NUMERIC_TEXT_BOX"}),r.d(e,"c",function(){return"STRING_TEXT_BOX"}),r.d(e,"d",function(){return M}),r.d(e,"f",function(){return F}),r.d(e,"g",function(){return W}),r.d(e,"e",function(){return P}),r.d(e,"h",function(){return V}),r.d(e,"j",function(){return L}),r.d(e,"n",function(){return E})},function(t,e){t.exports=require("sketch/settings")},function(t,e,r){"use strict";function n({value:t,multiple:e}){return Math.floor(t/e)*e}r.d(e,"a",function(){return n})},function(t,e){t.exports=require("sketch")},function(t,e,r){"use strict";r.d(e,"a",function(){return o});const n=20,i=15;function o(t){return function({width:e,y:r,value:o,placeholder:a}){const s=NSTextField.alloc().initWithFrame(NSMakeRect(0,r,e,n)),u=null==o?"":`${o}`;return s.setStringValue(u),a&&s.setPlaceholderString(a),{view:s,height:n+i,retrieveValue:function(){const e=`${s.stringValue()}`;return t?t(e):e}}}}},function(t,e){t.exports=require("sketch/dom")},function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return o});var n=r(0),i=r(2);function o({isAction:t,layers:e}){const{gridSize:r,whitelistRegularExpression:o}=Object(n.i)({keyPrefix:"alignLayersToArtboardGrid"}),a=o?new RegExp(o):null,s=Object(n.h)(),u=s.length>0;e=e||(u?s:Object(n.g)()),Object(n.j)(e,function(t){"Artboard"===t.type||"Group"===t.type||!t.getParentArtboard()||a&&a.test(t.name)||function({layer:t,gridSize:e}){const{x:r,y:o}=Object(n.f)(t),a=Object(i.a)({value:r,multiple:e}),s=Object(i.a)({value:o,multiple:e});t.frame.x=t.frame.x+a-r,t.frame.y=t.frame.y+s-o,Object(n.d)(t)}({layer:t,gridSize:r})}),t||Object(n.n)(`Aligned ${u?"selection":"all layers"} to artboard grid`)}},function(t,e,r){"use strict";r.r(e);var n=r(0),i=r(2);function o({layers:t,gridWidth:e,gridHeight:r}){const n=[];!function({grid:t,layersToInsert:e,gridWidth:r,gridHeight:n}){e.forEach(function(e){const o=Object(i.a)({value:e.frame.x,multiple:r}),a=Object(i.a)({value:e.frame.y,multiple:n}),s=function({grid:t,y:e}){const r=t.reduce(function(t,r,n){return-1!==t?t:r.y===e?n:t},-1);if(-1!==r)return t[r];const n=t.reduce(function(t,r,n){return e<r.y?n:t},t.length),i={y:e,layers:[]};return t.splice(n,0,i),i}({grid:t,y:a});s.layers.push({x:o,layer:e})}),function(t){t.forEach(function(t){t.layers.sort(function(t,e){return t.layer.frame.x-e.layer.frame.x})})}(t)}({grid:n,layersToInsert:t,gridWidth:e,gridHeight:r}),function({grid:t,gridHeight:e}){t.forEach(function({y:r,layers:n},o){let a=0;n.forEach(function({layer:t}){t.frame.height>a&&(a=t.frame.height)});const s=o+1;s<t.length&&r+a>=t[s].y&&t.slice(s).forEach(function(t){t.y=Object(i.a)({value:t.y+a,multiple:e})})})}({grid:n,gridHeight:r}),function({grid:t,gridWidth:e}){t.forEach(function({layers:t}){t.forEach(function({x:r,layer:n},o){const a=o+1,s=n.frame.width;a<t.length&&r+s>=t[a].x&&t.slice(a).forEach(function(t){t.x=Object(i.a)({value:t.x+s,multiple:e}),t.x===r&&(t.x+=e)})})})}({grid:n,gridWidth:e}),function(t){t.forEach(function({y:t,layers:e}){e.forEach(function({x:e,layer:r}){r.frame.x=e,r.frame.y=t})})}(n)}function a({isAction:t}){const{gridHeight:e,gridWidth:r,whitelistRegularExpression:i}=Object(n.i)({keyPrefix:"alignArtboardsToCanvasGrid"});o({layers:function(t){const e=Object(n.e)();if(!t)return e;const r=new RegExp(t);return e.filter(function(t){return!r.test(t.name)})}(i),gridWidth:r,gridHeight:e}),t||Object(n.n)("Aligned artboards to canvas grid")}r.d(e,"default",function(){return a})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return createNumericTextBox});var _text_box_factory__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);const createNumericTextBox=Object(_text_box_factory__WEBPACK_IMPORTED_MODULE_0__.a)(function(value){return parseFloat(eval(value))})},function(t,e){t.exports=require("sketch/ui")},function(t,e){t.exports=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}},function(t,e,r){"use strict";const n=async(t,e)=>{let r=0;for(const n of t)await e(await n,r++);return t};t.exports=n,t.exports.default=n},function(t,e,r){t.exports=r(13)},function(t,e,r){t.exports={action:r(14).default,"align-artboards-to-canvas-grid/align-artboards-to-canvas-grid":r(7).default,"align-layers-to-artboard-grid/align-layers-to-artboard-grid":r(6).default,"align-artboards-to-canvas-grid/settings":r(15).default,"align-layers-to-artboard-grid/settings":r(16).default,"reset-settings":r(17).default}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return s});var n=r(3),i=r(0),o=r(6),a=r(7);function s({actionContext:t}){const e=Object(i.i)(),r=function(t){const e=[];let r,i=-1;for(;++i<t.length;)"Artboard"!==(r=Object(n.fromNative)(t[i])).type&&r.getParentArtboard()&&e.push(r);return e}(t.layers),s=t.layers.length>r.length;e["alignLayersToArtboardGrid.snapToGrid"]&&r.length>0&&Object(o.default)({isAction:!0,layers:r}),e["alignArtboardsToCanvasGrid.snapToGrid"]&&s&&Object(a.default)({isAction:!0})}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return o});var n=r(0);const i={title:"Canvas Grid Settings",inputs:[{type:n.b,key:"alignArtboardsToCanvasGrid.gridWidth",label:"Grid width"},{type:n.b,key:"alignArtboardsToCanvasGrid.gridHeight",label:"Grid height"},{type:n.c,key:"alignArtboardsToCanvasGrid.whitelistRegularExpression",label:"Whitelist regular expression"},{type:n.a,key:"alignArtboardsToCanvasGrid.snapToGrid",label:"Snap artboards to canvas grid"}]};function o(){const t=Object(n.k)(i);t&&Object(n.m)(t,{successMessage:"Settings saved"})}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return o});var n=r(0);const i={title:"Artboard Grid Settings",inputs:[{type:n.b,key:"alignLayersToArtboardGrid.gridSize",label:"Grid size"},{type:n.c,key:"alignLayersToArtboardGrid.whitelistRegularExpression",label:"Whitelist regular expression"},{type:n.a,key:"alignLayersToArtboardGrid.snapToGrid",label:"Snap layers to artboard grid"}]};function o(){const t=Object(n.k)(i);t&&Object(n.m)(t,{successMessage:"Settings saved"})}},function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=n.l}]));